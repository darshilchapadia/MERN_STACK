{"version":3,"sources":["webpack:///./static/src/IssueList.jsx","webpack:///./server/server.js"],"names":["PAGE_SIZE","IssueRow","props","onDeleteClick","deleteIssue","issue","_id","substr","status","owner","created","toDateString","effort","completionDate","title","propTypes","object","isRequired","func","IssueTable","issueRows","issues","map","array","IssueList","Component","dataFetcher","urlBase","location","query","Object","assign","pageStr","_page","_offset","parseInt","_limit","search","keys","k","join","fetch","then","response","ok","json","error","Promise","reject","data","constructor","context","initialState","metadata","totalCount","records","forEach","Date","state","toastVisible","toastMessage","toastType","selectPage","bind","createIssue","setFilter","showError","dismissToast","message","setState","get","id","method","alert","loadData","router","push","pathname","componentDidMount","componentDidUpdate","prevProps","oldQuery","newQuery","effort_gte","effort_lte","eventkey","console","log","catch","err","newIssue","headers","body","JSON","stringify","updatedIssue","newIssues","concat","render","Math","ceil","contextTypes","app","use","static","db","process","env","NODE_ENV","webpack","require","webpackDevMiddleware","webpackHotMiddleware","config","entry","plugins","HotModuleReplacementPlugin","bundler","noInfo","delete","req","res","issueId","params","collection","deleteOne","deleteResult","result","n","put","validateIssue","updateOne","convertIssue","find","limit","next","savedIssue","filter","$lte","$gte","_summary","undefined","offset","cursor","sort","skip","count","toArray","total_count","length","aggregate","$match","$group","$sum","results","stats","post","insertOne","cleanupIssue","insertedId","setDB","newDB"],"mappings":"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","file":"0.c3b34d58b85a55b3896b.hot-update.js","sourcesContent":["import React from 'react';\nimport 'isomorphic-fetch';\nimport PropTypes from 'prop-types';\nimport {Link, withRouter} from 'react-router';\nimport {Button, Glyphicon, Table, Panel, Pagination } from 'react-bootstrap';\n\nimport IssueAdd from './IssueAdd.jsx';\nimport IssueFilter from './IssueFilter.jsx';\nimport Toast from './Toast.jsx';\n\n\nconst PAGE_SIZE = 10;\n\nconst IssueRow = (props) => {\n  function onDeleteClick(){\n    props.deleteIssue(props.issue._id);\n  }\n  return (\n  <tr>\n    <td><Link to={`/issues/${props.issue._id}`}>{props.issue._id.substr(-4)}</Link></td>\n    <td>{props.issue.status}</td>\n    <td>{props.issue.owner}</td>\n    <td>{props.issue.created.toDateString()}</td>\n    <td>{props.issue.effort}</td>\n    <td>{props.issue.completionDate ? props.issue.completionDate.toDateString() : ''}</td>\n    <td>{props.issue.title}</td>\n    <td><Button bsSize=\"xsmall\" onClick={onDeleteClick}>\n      <Glyphicon glyph=\"trash\" /> </Button>\n    </td>\n  </tr>\n);\n};\n\n\nIssueRow.propTypes = {\n  issue: PropTypes.object.isRequired,\n  deleteIssue: PropTypes.func.isRequired,\n};\n\nfunction IssueTable (props){\n  const issueRows = props.issues.map(issue => <IssueRow key={issue._id} issue={issue} deleteIssue={props.deleteIssue}/>);\n\n  return (\n    <Table bordered condensed hover responsive>\n\n     <thead>\n      <tr>\n       <th>Id</th>\n       <th>Title</th>\n       <th>Owner</th>\n       <th>Created</th>\n       <th>Effort</th>\n       <th>Completion Date</th>\n       <th>Title</th>\n       <th></th>\n      </tr>\n    </thead>\n    <tbody>{issueRows}</tbody>\n  </Table>\n   );\n\n}\n\nIssueTable.propTypes = {\n  issues : PropTypes.array.isRequired,\n  deleteIssue : PropTypes.func.isRequired,\n};\n\n\n\nclass IssueList extends React.Component {\n\n  static dataFetcher({urlBase, location}){\n    const query = Object.assign({}, location.query);\n    const pageStr = query._page;\n    if(pageStr){\n      delete query._page;\n      query._offset= (parseInt(pageStr, 10)-1) * PAGE_SIZE;\n    }\n    query._limit = PAGE_SIZE;\n    const search = Object.keys(query).map(k=>`${k}=${query[k]}`).join('&');\n    return fetch(`${urlBase || ''}/api/issues?${search}`).then(response=>{\n            if(!response.ok) return response.json(). then(error=>\n            Promise.reject(error));\n            return response.json().then(data=> ({IssueList: data}));\n          });\n  }\n\n  constructor(props, context) {\n    super(props, context);\n   //const issues = context.initialState.data.records;\n  //const issues = context.initialState && context.initialState.IssueList ? context.initialState.IssueList.records : [];\n const data = context.initialState.IssueList ? context.initialState.IssueList : {metadata : {totalCount: 0}, records: []};\n const issues = data.records;\n\n    issues.forEach(issue=>{\n      issue.created = new Date(issue.created);\n      if(issue.completionDate){\n        issue.completionDate = new Date(issue.completionDate);\n      }\n    });\n    this.state = { issues, toastVisible: false,\n    toastMessage: '', toastType: 'success',\n    totalCount :  data.metadata.totalCount,\n    };\n\n\n    this.selectPage = this.selectPage.bind(this);\n    this.createIssue = this.createIssue.bind(this);\n    this.setFilter = this.setFilter.bind(this);\n    this.deleteIssue = this.deleteIssue.bind(this);\n    this.showError = this.showError.bind(this);\n    this.dismissToast = this.dismissToast.bind(this);\n  }\n\n  showError(message){\n    this.setState({toastVisible: true, toastMessage: message,\n                  toastType: 'danger'});\n  }\n\n  dismissToast(){get\n    this.setState({toastVisible: false});\n  }\n\n  deleteIssue(id){\n    fetch(`/api/issues/${id}`,{method: 'DELETE'}).then(response =>{\n      if(!response.ok) alert('Failed to delete issue');\n      else this.loadData();\n    })\n  }\n\n  setFilter(query){\n    if(this.props.location.query !== query){\n      this.props.router.push({ pathname: this.props.location.pathname, query  });\n    }\n\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps) {\n    const oldQuery = prevProps.location.query;\n    const newQuery = this.props.location.query;\n\n    if (oldQuery === newQuery) {\n      return;\n    }\n\n    if(oldQuery.status == newQuery.status\n     && oldQuery.effort_gte === newQuery.effort_gte\n     && oldQuery.effort_lte === newQuery.effort_lte\n     && oldQuery._page === newQuery._page){\n      return;\n     }\n\n    this.loadData();\n  }\n\n  selectPage(){\n    const query= Object.assign(this.props.location.query, {_page: eventkey});\n    this.props.router.push({pathname: this.props.location.pathname, query});\n  }\n\n  loadData() {\n    // fetch(`/api/issues${this.props.location.search}`).then(response => {\n    //   if (response.ok) {\n    //     response.json().then(data => {\n    //       data.records.forEach(issue => {\n    //         issue.created = new Date(issue.created);\n    //         if (issue.completionDate) {\n    //           issue.completionDate = new Date(issue.completionDate);\n    //         }\n    //       });\n    //       this.setState({ issues: data.records });\n    //     });\n    //   } else {\n    //     response.json().then(error => {\n    //       this.showError(`Failed to fetch issues ${error.message}`);\n    //     });\n    //   }\n    // }).catch(err => {\n    //   this.showError(`Error in fetching data from server: ${err}`);\n    // });\n\n    IssueList.dataFetcher({location: this.props.location}).then(data=>{\n      const issues = data.IssueList.records;\n      issues.forEach(issue=>{\n        issue.created = new Date(issue.created);\n        if(issue.completionDate){\n          issue.completionDate = new Date(issue.completionDate);\n        }\n      });\n      this.setState({issues, totalCount: data.IssueList.metadata.totalCount});\n      console.log('satet:',  issues);\n    }).catch(err => {\n       this.showError(`Error in fetching data from server: ${err}`);\n     });\n\n  }\n\n  createIssue(newIssue) {\n    fetch('/api/issues', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(newIssue),\n    }).then(response => {\n      if (response.ok) {\n        response.json().then(updatedIssue => {\n          updatedIssue.created = new Date(updatedIssue.created);\n          if (updatedIssue.completionDate) {\n            updatedIssue.completionDate = new Date(updatedIssue.completionDate);\n          }\n          const newIssues = this.state.issues.concat(updatedIssue);\n          this.setState({ issues: newIssues });\n        });\n      } else {\n        response.json().then(error => {\n          this.showError(`Failed to add issue: ${error.message}`);\n        });\n      }\n    }).catch(err => {\n      this.showError(`Error in sending data to server: ${err.message}`);\n    });\n  }\n\n  render() {\n    console.log(\"issueList : \", this.state);\n    return (\n      <div>\n        <Panel collapsible header=\"Filter\">\n          <IssueFilter setFilter={this.setFilter}\n            initFilter={this.props.location.query}  />\n      </Panel>\n        <Pagination\n\n          items={Math.ceil(this.state.totalCount / PAGE_SIZE)}\n          activePage = {parseInt(this.props.location.query._page || '1', 10)}\n          onSelect={this.selectPage} maxButton={7} next prev boundaryLinks />\n        <IssueTable issues={this.state.issues} deleteIssue={this.deleteIssue}/>\n\n        <IssueAdd createIssue={this.createIssue} />\n        <Toast showing={this.state.toastVisible} message={this.state.toastMessage}\n          onDismiss={this.dismissToast} bsStyle={this.state.toastType} />\n\n      </div>\n    );\n  }\n}\n\nIssueList.contextTypes = {\n  initialState: PropTypes.object,\n};\n\nIssueList.propTypes = {\n  location: PropTypes.object.isRequired,\n  router: PropTypes.object,\n};\n\nexport default IssueList;\n\n\n\n// WEBPACK FOOTER //\n// ./static/src/IssueList.jsx","// import SourceMapSupport from 'source-map-support';\n// SourceMapSupport.install();\n// import 'babel-polyfill';\n\n//import path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport {ObjectId } from 'mongodb';\nimport Issue from './issue.js';\nimport renderedPageRouter from './renderedPageRouter';\n\nconst app = express();\napp.use(express.static('static'));\napp.use(bodyParser.json());\n\n\n// app.use(bodyParser.urlencoded({extended: true}));\n// app.use(bodyParser.json({type: 'application/*+json'}));\n//app.use(require('connect').bodyParser());\n//app.use(app.router);\n\n\n\nlet db;\n\n\nif (process.env.NODE_ENV !== 'production') {\n  const webpack = require('webpack');\n  const webpackDevMiddleware = require('webpack-dev-middleware');\n  const webpackHotMiddleware = require('webpack-hot-middleware');\n\n  const config = require('../webpack.config');\n  config.entry.app.push('webpack-hot-middleware/client',\n    'webpack/hot/only-dev-server');\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\n\n  const bundler = webpack(config);\n  app.use(webpackDevMiddleware(bundler, { noInfo: true }));\n  app.use(webpackHotMiddleware(bundler, { log: console.log }));\n}\n\napp.delete('/api/issues/:id', (req, res) =>{\n  let issueId;\n  try{\n    issueId = new ObjectId(req.params.id);\n  }catch(error){\n    res.status(422).json({message: `Invalid  issue ID format: ${error}`});\n    return;\n  }\n  db.collection('issues').deleteOne({ _id: issueId}).then((deleteResult) =>{\n    if(deleteResult.result.n === 1) res.json({status: 'OK'});\n    else res.json({status: 'Warning: object no found'});\n  }).catch(error=>{\n    console.log(error);\n    res.status(500).json({message: `Internal server error : ${error}`});\n\n  });\n});\n\napp.put('/api/issues/:id', (req, res)=> {\n\n    let issueId;\n    try{\n      issueId = new ObjectId(req.params.id);\n    }catch(error){\n      res.status(422).json({message: `Invalid issue ID format : ${error}`});\n      return;\n    }\n    const issue = req.body;\n\n    delete issue._id;\n    const err = Issue.validateIssue(issue);\n    if(err){\n      res.status(422).json({message: `Invalid request: ${err}`});\n      return;\n    }\n\nconsole.log(\"the title to update is : \"+issue.created);\n    db.collection('issues').updateOne({_id: issueId},\n    Issue.convertIssue(issue)).then(()=>\n      db.collection('issues').find({_id: issueId}).limit(1)\n    .next()\n  )\n    .then(savedIssue=>{\n      res.json(savedIssue);\n    })\n    .catch(error=>{\n      console.log(error);\n      res.status(500).json({message: `Internal Server error : ${error}`});\n    });\n});\n\napp.get('/api/issues', (req, res) => {\n  const filter ={};\n  if(req.query.status) filter.status = req.query.status;\n  if(req.query.effort_lte || req.query.effort_gte) filter.effort ={};\n  if(req.query.effort_lte) filter.effort.$lte = parseInt(req.query.effort_lte, 10);\n  if(req.query.effort_gte) filter.effort.$gte = parseInt(req.query.effort_gte, 10);\n  if(req.query._summary === undefined){\n    const offset = req.query._offset ? parseInt(req.query._offset, 10) :0;\n    let limit = req.query.limit ? parseInt(req.query._limit, 10) :20;\n    if (limit >50) limit = 50;\n      const cursor =db.collection('issues').find(filter).sort({_id: 1}).skip(offset).limit(limit);\n      let totalCount;\n      cursor.count(false).then(result=>{\n        totalCount = result;\n        return cursor.toArray();\n      }).then((issues) => {\n      const metadata = { total_count: issues.length };\n      res.json({ metadata, records: issues });\n      console.log(\"request\");\n    })\n      .catch((error) => {\n        console.log(error);\n        res.status(500).json({ message: 'Internal Server Error' });\n      });\n  }else{\n    db.collection('issues').aggregate([\n      {$match: filter},\n      {$group: {_id: {owner: '$owner', status: '$status'},\n      count:{$sum: 1}\n    }} ]).toArray().then(results=>{\n      const stats = {};\n      results.forEach(result=>{\n        if(!stats[result._id.owner])  stats[result._id.owner] = {};\n        stats[result._id.owner][result._id.status] = result.count;\n      });\n      res.json(stats);\n    }).catch(error=>{\n      console.log(error);\n      res.status(500).json({message: `Internal Server error : ${error}`});\n    });\n  }\n\n\n});\n\napp.get('/api/issues/:id', (req, res) =>{\n  let issueId;\n  try{\n\n    issueId = ObjectId(req.params.id);\n  }catch(error){\n    res.status(422).json({message:`Invalid issue Id format: ${req.params.id} ${error}`});\n    return;\n  }\n\n  db.collection('issues').find({_id: issueId}).limit(1)\n  .next()\n  .then(issue=>{\n    if(!issue) res.status(404).json({message: `No such issue: ${issueId}`});\n    else res.json(issue);\n  })\n  .catch(error=> {\n    console.log(error);\n    res.status(500).json({message: `Internal server error: ${error}`});\n  });\n});\n\napp.post('/api/issues', (req, res) => {\n\n  const newIssue = req.body;\n  // newIssue.id = issues.length +1;\n  newIssue.created = new Date();\n  if (!newIssue.status) {\n    newIssue.status = 'New';\n  }\nconsole.log('******** hello ********');\n  const err = Issue.validateIssue(newIssue);\n  if (err) {\n    console.log('******** error ********');\n    res.status(422).json({ message: `Invalid request: ${err}` });\n    return;\n  }\n\n  db.collection('issues').insertOne(Issue.cleanupIssue(newIssue)).then((result) => {\n    console.log('******** hello1 ********');\n    db.collection('issues').find({ _id: result.insertedId }).limit(1).next()\n      .then((newIssue) => {\n        console.log('******** hello2 ********');\n        res.json(newIssue);\n      })\n      .catch((error) => {\n        console.log(error);\n        res.status(500).json({ message: `Internal Server error : ${error}` });\n      });\n  });\n\n  // app.get('*', (req, res) => {\n  //   res.sendFile(path.resolve('static/index.html'));\n  // });\n\n  // issues.push(newIssue);\n\n  // res.json(newIssue);\n});\napp.use('*', renderedPageRouter);\n// app.listen(3000, ()=>{\n//   console.log('App started on port 3000');\n// });\n\nfunction setDB(newDB){\n  db = newDB;\n}\n\nexport {app, setDB};\n\n// MongoClient.connect('mongodb://localhost/issuetracker').then((connection) => {\n//   db = connection;\n//\n//   app.listen(3000, () => {\n//     console.log('App started on port 3000');\n//   });\n// }).catch((error) => {\n//   console.log('ERROR', error);\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./server/server.js"],"sourceRoot":""}